# secapp
# vulnapp
### Инструкция по сборке и запуску приложения
1. Все действия для OS Windows.
2. Перед начало необходимо установить пакет django. Для этого ввести следующую команду в консоле: pip install Django
3. Далее возвращаемся в git. Перейти в ветку new_branch.
4. Скачать содержимое, как zip файл.
5. Распаковать архив.
6. Переместить содержимое по пути, не содержащем кириллицу.
7. Открыть папку webapp через среду разработки PyCharm.
8. Открыть терминал в среде разработки.
9. Перейти в папку vulnwebapp: cd vulnwebapp
10. Запустит сервер: python manage.py runserver


### Комментарии к исправлениям
1. SQLI: 
Исправление реализованной уязвимости было достигнуто путем очистки вводимых данных, так как для ввода пароля и логина достаточно буквы, цифры и нижнее подчеркивание, и использование параметризированного запроса, т.е. возможность предварительно скомпилированного sql-кода, в который потом добавляются параметры.

2. IDOR:
Исправление релизованной уязвимости было достигнуто путем повышения энтропии идентификатора пользователя, т.е. вероятность подбора идентификатора очень снижается. Для более качественной защиты стоит добавить проверку прав доступа. Также, вероятно, можно отказаться от использования идентификатора в GET и POST запросах, путем хранения его в сесии пользователя.

3. XSS:
Исправление реализованной уязвимости было достигнуто путем экранирования в UNICODE и кодирования в html данных, приходящих из БД. Также, если это были бы не сообщения (так как тяжело выделить значения), можно было  добавить проверку whitelist.

4. OS command injection: 
Исправление реализованной уязвимости было достигнуто путем использования функции shlex.quote(), которая экранирует строку, и получается, что к команде добавляется строка в кавычках (как один аргумент).

5. Path Traversal:
Исправление данной уязвимости было реализовано путем проверки наличия подстроки '../', которая позволяет перемещаться по файловой системе. Данная проверка не является достаточной, так как в Windows ее можно заменить следующей подстрокой '..\'.

6. Brute force:
Была добавлена новая модель, которая содержит ip с которого происходит отправка POST запросов, время разблокировки (в случае блокировки), статус, количество попыток. Реализация следующая, если с одного IP три раза подряд введена некорректная пара логин/пароль, то проверка с данного IP прекращается на 5 минут. После этого количество попыток обнуляется.
